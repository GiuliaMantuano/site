<!DOCTYPE html> <!--[if IE 8]> <html lang="en" class="ie8"> <![endif]--> <!--[if IE 9]> <html lang="en" class="ie9"> <![endif]--> <!--[if !IE]><!--> <html lang="en"> <!--<![endif]--> <head> <title>SRP: Simplicity and Complexity | Codurance </title> <!-- Meta --> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content="Our team of dedicated software craftsmen provides consultancy, software development, and training services to clients seeking high quality development processes and software solutions."> <meta name="author" content="Codurance Ltd"> <!-- Open Graph tags - Used when publishing on Facebook --> <meta property="og:site_name" content="Codurance"/> <meta property="og:description" content="Our team of dedicated software craftsmen provides consultancy, software development, and training services to clients seeking high quality development processes and software solutions."/> <meta property="og:url" content="http://codurance.com"/> <meta property="og:image" content="http://codurance.com/assets/img/codurance.png"/> <!-- Favicon --> <link rel="shortcut icon" href="/assets/img/favicon.ico"> <!-- CSS Global Compulsory --> <link rel="stylesheet" href="/assets/plugins/bootstrap/css/bootstrap.min.css"> <link rel="stylesheet" href="/assets/css/style.css"> <link rel="stylesheet" href="/assets/css/style.css"> <link rel="stylesheet" href="/assets/css/blog.style.css"> <!-- CSS Implementing Plugins --> <link rel="stylesheet" href="/assets/plugins/line-icons/line-icons.css"> <link rel="stylesheet" href="/assets/plugins/font-awesome/css/font-awesome.min.css"> <link rel="stylesheet" href="/assets/plugins/owl-carousel/owl-carousel/owl.carousel.css"> <!-- CSS Theme --> <link rel="stylesheet" href="/assets/css/plugins.css"> <link rel="stylesheet" href="/assets/css/app.css"> <link rel="stylesheet" href="/assets/css/pages/blog.css"> <link rel="stylesheet" href="/assets/css/theme-colors/orange.css"> <link rel="stylesheet" href="/assets/css/headers/header-default.css"> <link rel="stylesheet" href="/assets/css/footers/footer-v1.css"> <!-- CSS Customization --> <link rel="stylesheet" href="/assets/css/custom.css"> <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/styles/idea.min.css"> <!--fonts --> <link href='http://fonts.googleapis.com/css?family=Oxygen:700,400' rel='stylesheet' type='text/css'> <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-46289079-1', 'codurance.com'); ga('send', 'pageview'); </script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.8.0/highlight.min.js"></script> <script>hljs.initHighlightingOnLoad();</script> <!-- ShareThis --> <script type="text/javascript">var switchTo5x=true;</script> <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script> <script type="text/javascript">stLight.options({publisher: "8b795ed1-9577-43d1-9e4e-55c54306336b", doNotHash: true, doNotCopy: false, hashAddressBar: false});</script> </head> <body > <div class="wrapper"> <!--=== Header ===--> <div class="header no-topbar"> <div class="container"> <!-- Logo --> <a class="logo" href="/"> <img class="logo-header" src="/assets/img/codurance.png" alt="Codurance Logo" height="45px;"> </a> <!-- End Logo --> <!-- Toggle get grouped for better mobile display --> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse"> <span class="sr-only">Toggle navigation</span> <span class="fa fa-bars"></span> </button> <!-- End Toggle --> </div><!--/end container--> <!-- Collect the nav links, forms, and other content for toggling --> <div class="collapse navbar-collapse mega-menu navbar-responsive-collapse"> <div class="container"> <ul class="nav navbar-nav"> <li><a href="/services">Services</a></li> <li><a href="/videos">Videos</a></li> <li><a href="/blog">Blog</a></li> <li><a href="/work-with-us">Work with us</a></li> <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown">About Us <i class="icon-angle-down">&nbsp;</i></a><ul class="dropdown-menu"> <li><a href="/aboutus/ourteam">Our Team</a></li> <li><a href="/aboutus/ourcompany">Our Company</a></li> <li><a href="/aboutus/ourpractices">Our Practices</a></li> <li><a href="/aboutus/contact">Contact</a></li> </ul></li> </ul> </div><!--/end container--> </div><!--/navbar-collapse--> </div> <!--=== End Header ===--> <div class="bg-color-light"> <div class="container content-sm"> <div class="row blog-page blog-item"> <!-- Left Sidebar --> <div class="col-md-9"> <!--Blog Post--> <div class="news-v3 bg-color-white margin-bottom-30"> <div class="news-v3-in shareThisButtons"> <h2>SRP: Simplicity and Complexity</h2> <ul class="list-inline posted-info"> <li>By <a class='author' href='/blog/author/sandro-mancuso/'>Sandro Mancuso</a></li> <li>Posted 26 Jul 2011</li> <li> </li> </ul> <blockquote>Simplicity does not precede complexity, but follows it. <footer><cite>Alan Perlis</cite></footer> </blockquote> <p>The Single Responsibility Principle (SRP) - one of the <a href="http://craftedsw.blogspot.com/2010/06/object-oriented-design-principles-part.html">SOLID</a> principles - is definitely one of my favourites principles in Object-Oriented Design. I find its simplicity and, at the same time, its complexity fascinating. I have known this principle for years and <a href="http://craftedsw.blogspot.com/2010/06/object-oriented-design-principles-part.html">wrote about it</a> for the first time over one year ago. Still, I can't stop thinking about how hard it is to apply it. Speaking to and pairing with many developers over the years, I noticed that every single one of them understands what the principle is about but when it comes to write code, either they forget it or they simply can't find a way to adhere to it. I'll give you my view about the problem and what I've seen happening in many occasions.</p> <h3>The outside view</h3> <blockquote>Every class and method should have just one responsibility</blockquote> <p>This is what I call <em>outside view</em> and naming plays a big role here.</p> <p>This view is generally used when we need to add some totally new code. We think what the new code is about, create a class and/or a method, give it an appropriate name that represents what the new code does and we are done. We also use this <em>outside view</em> when reading code. When looking at a class or method name, it should be clear to us what they do.</p> <p>I don't think anyone ever had a problem understanding this principle.</p> <p>However, if it is so simple to understand, why don't we all follow it? Why do we still find classes and methods with hundreds, if not thousands of lines? A few things come to my mind to explain that. Maybe we are just bad at naming classes and methods. Maybe the names we give are too generic or too broad, allowing us to write loads of code in there. Maybe some of us just don't care.</p> <h3>The inside view</h3> <blockquote>Classes and methods should have one, and only one, reason to change</blockquote> <p>This is what I call <em>inside view</em> and it is the other (often forgotten) side of the Single Responsibility Principle.</p> <p>This view is generally used when we need to change some existing code or add more code to it. That's when we look inside each class and method to see exactly what they do. More often than not, we get frustrated because they do much more than they should do and we need to go through many lines of frustration and WTFs to understand the bloody thing.</p> <p>However, it is much easier to adhere to the SRP when we keep the <em>inside view</em> in mind instead of the <em>outside view</em>. That means, always think about the number of reasons to change a class or method instead of thinking purely in their responsibilities.</p> <h3>So, when and where do things go wrong?</h3> <blockquote>NOTE: In general I find more SRP violations in systems where developers are not doing TDD and refactoring.</blockquote> <p>Here is some food for thought. I'm risking to say that the majority of SRP violations are found in the classes and methods that are closer to the interface of the system. For example, in a web application, it's very common to find large controllers, actions or backing bean classes. For swing applications, we tend to find large event handlers. For systems where the entry point is a queue, we tend to find large methods that are responsible for processing the messages.Â </p> <p>In general, this happens because the classes and methods closer to the interface of the system have a more generic and broader responsibility. Quite often, these methods are responsible to trigger loads of business rules and/or complex workflows.</p> <p>Imaging that the input to our system is a huge XML file representing a trade. Also imagine that the first method invoked to handle that is called "processTrade(tradeXML)", located in a TradeService class. What is the responsibility of this method? It is to process a trade, right? Should it have a different name? Our system is expected to "process" all trades received so it is fair to say that the first method handling the request (or reading from a queue) should be called processTrade.</p> <p>In another example, imagine that an user added a few items to her shopping basket (web application), provided some payment details and clicked on the "place order" button. In our back end, we will have a method handling this request that probably will be called something like placeOrder(order). Fair, right?</p> <h3>Developing an idea</h3> <blockquote>In general, the closer the code is to the system's interface, the broader and more generic its responsibility will be. The further away the code is from the system's interface, the narrower and more specific its responsibility will be.</blockquote> <p>Â </p> <p>In both examples above, by their names, you can argue that the methods processTrade and placeOrder have a single responsibility. One processes the incoming trade and the other places a customer order. So, when developers take into account <strong>just</strong> the <em>outside view</em> of the SRP, they feel comfortable to add as much code as they need to satisfy these responsibilities.</p> <p>The problem is that processing a trade or placing an order may be extremely complicated tasks, where a huge workflow will be triggered, many business rules and requirements need to be satisfied and we will need to write hundreds, if not thousands, of lines for that. So clearly, adding all these lines to a single method doesn't just simply violates the SRP. It's also plain stupid.</p> <p>So, in order to make our code compliant to the SRP, we need to have just a single reason to change it. This leads to a complementary idea.</p> <blockquote>In general, the closer the class is to the system's interface, the more delegation the class will do. The further way the class is from the system's interface, less delegation the class will do.</blockquote> <p>A general example would be, in a traditional Java web application, the controllers, that are closer to the UI, have a broad responsibility and tend to delegate all the business logic to other objects. They just control the flow. At the other end, we have the DAOs that have a very specific and narrow responsibility, almost never delegating anything to another class. In the middle, we have services, that do some business logic of their own but also delegate work to other collaborator classes. Services tend to have a narrower responsibility when compared to a controller but a broader responsibility when compared to DAOs. Still, each class and method have a single responsibility.</p> <h3>Asking a different question</h3> <p>When mentoring and/or pair-programming with other developers, quite often we end up discussing about the amount of code in a method or methods in a class. Just using the SRP's <em>outside view</em> as an argument sometimes is not enough to convince some developers that the code is doing too much. That's why I find the <em>inside view</em> more useful. Instead of asking how many responsibilities a method or class have, I now ask how many reasons we would have to change them.</p> <div id="sharethisButtons"> <span class='pull-right st_twitter_large' displayText='Tweet' st_url='http://codurance.com/2011/07/26/srp-simplicity-and-complexity/'></span> <span class='pull-right st_linkedin_large' displayText='LinkedIn' st_url='http://codurance.com/2011/07/26/srp-simplicity-and-complexity/'></span> <span class='pull-right st_email_large' displayText='Email' st_url='http://codurance.com/2011/07/26/srp-simplicity-and-complexity/'></span> <span class='pull-right st_sharethis_large' displayText='ShareThis' st_url='http://codurance.com/2011/07/26/srp-simplicity-and-complexity/'></span> </div> </div> </div> <!--End Blog Post--> <!--About the author--> <div class = "blog-author bg-color-white margin-bottom-30"> <div class="headline headline-md margin-bottom-30"> <h2>About the author</h2> </div> <div class="row"> <div class="col-sm-3 pull-left"> <img class="img-responsive" id="author-img" src="/assets/img/custom/team/sandro_mancuso.jpg"> </div> <div class="col-sm-9"> <div class="blog-author-desc"> <div class="overflow-h"> <h4>Sandro Mancuso</h4> <ul class="list-inline"> <li><a href="https://twitter.com/intent/tweet?text=.%20@sandromancuso%20Type%20your%20text%20here&url=http://codurance.com/2011/07/26/srp-simplicity-and-complexity/&via=codurance"><i class="fa fa-twitter"></i></a></li> </ul> </div> <p><p>Software craftsman, <a href="http://www.amazon.co.uk/dp/0134052501">author</a>, and founder of the <a href="http://londonswcraft.com">London Software Craftsmanship Community (LSCC)</a>. Sandro has been coding since a very young age but only started his professional career in 1996. He has worked for startups, software houses, product companies, international consultancy companies, and investment banks. </p><p>During his career Sandro had the opportunity to work in a good variety of projects, with different languages, technologies, and across many different industries. Sandro has a lot of experience in bringing the Software Craftsmanship ideology and Extreme Programming practices to organisations of all sizes. Sandro is internationally renowned by his work on evolving and spreading Software Craftsmanship and is frequently invited to speak in many conferences around the world. His professional aspiration is to raise the bar of the software industry by helping developers become better at and care more about their craft.</p></p> </div> </div> </div> </div> <!--End About the author--> </div> <!-- End Left Sidebar --> <!-- Right Sidebar --> <div class="col-md-3"> <!--Related Blog Posts--> <div class="posts margin-bottom-40"> <div class="headline-v2"> <h2>Related Blogs</h2> </div> <!--End Related Blog Posts--> </div> <!-- Recent blogs --> <div class="posts margin-bottom-40"> <div class="headline-v2"><h2>Recent Blogs</h2></div> <div class="blog-thumb blog-thumb-circle margin-bottom-15"> <div class="blog-thumb-hover"> <a href="/2016/01/15/premature-microservices/"> <img class="rounded-x" src="/assets/img/custom/blog/unbalanced-tree.jpg" alt=""></img> </a> <a class="hover-grad" href="blog_single.html"> <i class="fa fa-hand-spock-o"></i> </a> </div> <div class="blog-thumb-desc"> <h3><a href="/2016/01/15/premature-microservices/">Premature Microservices</a></h3> <ul class="blog-thumb-info"> <li> Mashooq Badar </li> </ul> </div> </div> <div class="blog-thumb blog-thumb-circle margin-bottom-15"> <div class="blog-thumb-hover"> <a href="/2016/01/15/GitHubAnimator/"> <img class="rounded-x" src="/assets/img/custom/blog/octokit.png" alt=""></img> </a> <a class="hover-grad" href="blog_single.html"> <i class="fa fa-hand-spock-o"></i> </a> </div> <div class="blog-thumb-desc"> <h3><a href="/2016/01/15/GitHubAnimator/">GitHubAnimator</a></h3> <ul class="blog-thumb-info"> <li> Pedro Santos </li> </ul> </div> </div> <div class="blog-thumb blog-thumb-circle margin-bottom-15"> <div class="blog-thumb-hover"> <a href="/2016/01/10/clojure-vim-environment/"> <img class="rounded-x" src="/assets/img/custom/blog/vimenv.png" alt=""></img> </a> <a class="hover-grad" href="blog_single.html"> <i class="fa fa-hand-spock-o"></i> </a> </div> <div class="blog-thumb-desc"> <h3><a href="/2016/01/10/clojure-vim-environment/">Clojure VIM Environment</a></h3> <ul class="blog-thumb-info"> <li> Mashooq Badar </li> </ul> </div> </div> <div class="blog-thumb blog-thumb-circle margin-bottom-15"> <div class="blog-thumb-hover"> <a href="/2015/12/13/testing-multithreaded-code-in-java/"> <img class="rounded-x" src="/assets/img/custom/blog/picot.png" alt=""></img> </a> <a class="hover-grad" href="blog_single.html"> <i class="fa fa-hand-spock-o"></i> </a> </div> <div class="blog-thumb-desc"> <h3><a href="/2015/12/13/testing-multithreaded-code-in-java/">Testing multithreaded code in Java</a></h3> <ul class="blog-thumb-info"> <li> Felipe FernÃ¡ndez </li> </ul> </div> </div> <div class="blog-thumb blog-thumb-circle margin-bottom-15"> <div class="blog-thumb-hover"> <a href="/2015/11/25/mouseless-programming/"> <img class="rounded-x" src="/assets/img/custom/blog/dilbert.png" alt=""></img> </a> <a class="hover-grad" href="blog_single.html"> <i class="fa fa-hand-spock-o"></i> </a> </div> <div class="blog-thumb-desc"> <h3><a href="/2015/11/25/mouseless-programming/">Mouseless Programming</a></h3> <ul class="blog-thumb-info"> <li> Tomaz Tekavec </li> </ul> </div> </div> <div class="blog-thumb blog-thumb-circle margin-bottom-15"> <div class="blog-thumb-hover"> <a href="/2015/11/25/Property-based-testing-FsCheck-Resharper-NCrunch-Visual-Studio-2013/"> <img class="rounded-x" src="/assets/img/custom/blog/2015-12-01-Faran-crane-truck.jpg" alt=""></img> </a> <a class="hover-grad" href="blog_single.html"> <i class="fa fa-hand-spock-o"></i> </a> </div> <div class="blog-thumb-desc"> <h3><a href="/2015/11/25/Property-based-testing-FsCheck-Resharper-NCrunch-Visual-Studio-2013/">Property based testing</a></h3> <ul class="blog-thumb-info"> <li> Alessandro Di Gioia </li> </ul> </div> </div> <div class="blog-thumb blog-thumb-circle margin-bottom-15"> <div class="blog-thumb-hover"> <a href="/2015/11/22/changing-scalatra-and-sbt-directories/"> <img class="rounded-x" src="/assets/img/custom/blog/2015-11-21-folders.jpg" alt=""></img> </a> <a class="hover-grad" href="blog_single.html"> <i class="fa fa-hand-spock-o"></i> </a> </div> <div class="blog-thumb-desc"> <h3><a href="/2015/11/22/changing-scalatra-and-sbt-directories/">Changing Scalatra and sbt default directories</a></h3> <ul class="blog-thumb-info"> <li> Sandro Mancuso </li> </ul> </div> </div> <!-- End Recent blogs --> </div> <!-- End Right Sidebar --> </div> <!--/row--> </div> <!--/container--> </div> <!-- background color --> </div> <!--=== Copyright ===--> <!--=== Footer ===--> <div id="footer-v1" class="footer-v1"> <div class="footer"> <div class="container"> <div class="row"> <!-- About --> <div class="col-md-3 md-margin-bottom-40"> <a href="/"> <img id="logo-footer" class="footer-logo" src="/assets/img/footer-logo.png" alt="Codurance"> </a> <p>Software is our passion. </p> <p>We are software craftsmen. We build well-crafted software for our customers, we help developers to get better at their craft through training, coaching and mentoring, and we help companies get better at delivering software. </p> </div><!--/col-md-3--> <!-- End About --> <!-- Latest --> <div class="col-md-3 md-margin-bottom-40"> <div class="posts"> <div class="headline"><h2>Latest Blogs</h2></div> <ul class="list-unstyled latest-list"> <li> <a href="/2016/01/15/premature-microservices/" alt="Premature Microservices">Premature Microservices</a> <small>Mashooq Badar</small> </li> <li> <a href="/2016/01/15/GitHubAnimator/" alt="GitHubAnimator">GitHubAnimator</a> <small>Pedro Santos</small> </li> <li> <a href="/2016/01/10/clojure-vim-environment/" alt="Clojure VIM Environment">Clojure VIM Environment</a> <small>Mashooq Badar</small> </li> </ul> </div> </div><!--/col-md-3--> <!-- End Latest --> <!-- Link List --> <div class="col-md-3 md-margin-bottom-40"> <div class="headline"><h2>Useful Links</h2></div> <ul class="list-unstyled link-list"> <li><a href="/services">Services</a><i class="fa fa-angle-right"></i></li> <li><a href="/videos">Videos</a><i class="fa fa-angle-right"></i></li> <li><a href="/blog">Blog</a><i class="fa fa-angle-right"></i></li> <li><a href="/work-with-us">Work with us</a><i class="fa fa-angle-right"></i></li> <li><a href="/aboutus/ourcompany">About us</a><i class="fa fa-angle-right"></i></li> </ul> </div><!--/col-md-3--> <!-- End Link List --> <!-- Contact Us --> <div class="col-md-3 map-img md-margin-bottom-40"> <div class="headline"><h2>Contact Us</h2></div> <address class="md-margin-bottom-40"> <a href="https://www.google.co.uk/maps/place/I2+Office+Aldersgate/@51.5175798,-0.0978509,19z/data=!4m2!3m1!1s0x0000000000000000:0x71133b028b4f269d" target="_blank">200 Aldersgate, EC1A 4HD<br> London, UK </a><br> Phone: +44 203 440 4015 <br> Email: <a href="mailto:hello@codurance.com" target="_blank" class="">hello@codurance.com</a> </address> </div><!--/col-md-3--> <!-- End Contact Us --> </div> </div> </div><!--/footer--> <div class="copyright"> <div class="container"> <div class="row"> <div class="col-md-6"> <p> Company Registration No: 8712584 </p> </div> <!-- Social Links --> <div class="col-md-6"> <ul class="footer-socials list-inline"> <li> <a href="https://www.facebook.com/codurance/" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Facebook" target="_blank"> <i class="fa fa-facebook"></i> </a> </li> <li> <a href="https://www.linkedin.com/company/codurance" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Linkedin" target="_blank"> <i class="fa fa-linkedin"></i> </a> </li> <li> <a href="https://twitter.com/codurance" class="tooltips" data-toggle="tooltip" data-placement="top" title="" data-original-title="Twitter" target="_blank"> <i class="fa fa-twitter"></i> </a> </li> <li> <a href="/atom.xml" data-original-title="Feed" class="tooltips" data-toggle="tooltip" data-placement="top" title="" target="_blank"> <i class="fa fa-rss"></i> </a> </li> </ul> </div> <!-- End Social Links --> </div> </div> </div><!--/copyright--> </div> <!--=== End Footer ===--> <!--=== End Copyright ===--> </div> <!-- JS Global Compulsory --> <script type="text/javascript" src="/assets/plugins/jquery/jquery.min.js"></script> <script type="text/javascript" src="/assets/plugins/jquery/jquery-migrate.min.js"></script> <script type="text/javascript" src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script> <script type="text/javascript" src="/assets/plugins/back-to-top.js"></script> <!-- JS Implementing Plugins --> <script type="text/javascript" src="/assets/plugins/owl-carousel/owl-carousel/owl.carousel.js"></script> <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> <script type="text/javascript" src="/assets/plugins/gmap/gmap.js"></script> <!-- JS Customization --> <script type="text/javascript" src="/assets/js/custom.js"></script> <!-- JS Page Level --> <script type="text/javascript" src="/assets/js/app.js"></script> <script type="text/javascript" src="/assets/js/pages/index.js"></script> <script type="text/javascript" src="/assets/js/plugins/owl-carousel.js"></script> <script type="text/javascript"> jQuery(document).ready(function() { App.init(); OwlCarousel.initOwlCarousel(); Contact.initMap(); }); </script> <!--[if lt IE 9]> <script src="/assets/plugins/respond.js"></script> <script src="/assets/plugins/html5shiv.js"></script> <script src="/assets/js/plugins/placeholder-IE-fixes.js"></script> <![endif]--> </body> </html>
